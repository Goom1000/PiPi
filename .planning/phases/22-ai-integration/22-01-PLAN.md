---
phase: 22-ai-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - services/aiProvider.ts
  - types.ts
autonomous: true

must_haves:
  truths:
    - "GameQuestionRequest type exists with gameType, difficulty, questionCount, slideContext, optionalHints"
    - "SlideContext type exists with lessonTopic, cumulativeContent, currentSlideTitle, currentSlideContent"
    - "AIProviderInterface includes generateGameQuestions method signature"
    - "BLOOM_DIFFICULTY_MAP constant maps easy/medium/hard to Bloom's taxonomy levels"
  artifacts:
    - path: "services/aiProvider.ts"
      provides: "GameQuestionRequest, SlideContext types; generateGameQuestions interface method"
      contains: "generateGameQuestions"
    - path: "types.ts"
      provides: "GameDifficulty type export"
      contains: "GameDifficulty"
  key_links:
    - from: "services/aiProvider.ts"
      to: "types.ts"
      via: "type imports"
      pattern: "import.*GameType.*from.*types"
---

<objective>
Define TypeScript types and interface extension for game-specific question generation.

Purpose: Establish type-safe contracts before implementing AI generation logic. This ensures both Gemini and Claude providers implement the same interface consistently.

Output:
- GameQuestionRequest interface (gameType, difficulty, questionCount, slideContext, optionalHints)
- SlideContext interface (lesson context for question generation)
- GameDifficulty type (easy | medium | hard)
- BLOOM_DIFFICULTY_MAP constant (maps difficulty to Bloom's taxonomy)
- Extended AIProviderInterface with generateGameQuestions method
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/22-ai-integration/22-CONTEXT.md
@.planning/phases/22-ai-integration/22-RESEARCH.md
@services/aiProvider.ts
@types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add GameDifficulty type to types.ts</name>
  <files>types.ts</files>
  <action>
Add a new type export in the game types section (near GameType):

```typescript
// Game difficulty presets for AI question generation
export type GameDifficulty = 'easy' | 'medium' | 'hard';
```

Place this after the GameType definition (line ~32) to keep game-related types together.
  </action>
  <verify>TypeScript compiles without errors: `npx tsc --noEmit`</verify>
  <done>GameDifficulty type exists in types.ts and is exported</done>
</task>

<task type="auto">
  <name>Task 2: Add game question types and interface to aiProvider.ts</name>
  <files>services/aiProvider.ts</files>
  <action>
1. Add import for GameType and GameDifficulty from '../types'

2. Add SlideContext interface (after GenerationInput, before AIErrorCode):
```typescript
// Context from slides for question generation
export interface SlideContext {
  lessonTopic: string;           // From first slide title
  cumulativeContent: string;     // All slides up to current, formatted
  currentSlideTitle: string;     // Current slide title
  currentSlideContent: string[]; // Current slide bullets
}
```

3. Add GameQuestionRequest interface:
```typescript
// Request structure for game-specific question generation
export interface GameQuestionRequest {
  gameType: 'millionaire' | 'the-chase' | 'beat-the-chaser';
  difficulty: GameDifficulty;    // For Chase/Beat the Chaser (ignored for Millionaire)
  questionCount: number;         // 3/5/10 for Millionaire, ~10 for Chase
  slideContext: SlideContext;
  optionalHints?: string;        // Teacher's focus hints ("focus on vocabulary")
}
```

4. Add BLOOM_DIFFICULTY_MAP constant (for prompt generation):
```typescript
// Bloom's taxonomy mapping for consistent difficulty calibration
export const BLOOM_DIFFICULTY_MAP = {
  easy: {
    levels: ['Remember', 'Understand'],
    questionTypes: '"What is...", "Name the...", "Give an example of..."',
    description: 'Basic recall and comprehension questions'
  },
  medium: {
    levels: ['Apply', 'Analyze'],
    questionTypes: '"How would you...", "What would happen if...", "Compare..."',
    description: 'Application and analysis questions'
  },
  hard: {
    levels: ['Evaluate', 'Create'],
    questionTypes: '"Why does X affect Y?", "What is the best strategy for..."',
    description: 'Evaluation and synthesis questions requiring reasoning'
  }
} as const;
```

5. Extend AIProviderInterface with new method (add before closing brace):
```typescript
  // Game-specific question generation with difficulty progression
  generateGameQuestions(
    request: GameQuestionRequest
  ): Promise<QuizQuestion[]>;
```
  </action>
  <verify>
1. TypeScript compiles: `npx tsc --noEmit`
2. Verify exports work: Create a test file that imports { GameQuestionRequest, SlideContext, BLOOM_DIFFICULTY_MAP } from './services/aiProvider'
  </verify>
  <done>
- SlideContext interface exported from aiProvider.ts
- GameQuestionRequest interface exported from aiProvider.ts
- BLOOM_DIFFICULTY_MAP constant exported from aiProvider.ts
- AIProviderInterface includes generateGameQuestions method
- All existing code continues to work (backward compatible)
  </done>
</task>

</tasks>

<verification>
1. Run `npx tsc --noEmit` - should complete with no errors
2. Verify GameDifficulty is exported from types.ts
3. Verify new types/interface are exported from aiProvider.ts
4. Existing game launch still works (no runtime changes yet)
</verification>

<success_criteria>
- TypeScript compilation passes
- GameQuestionRequest, SlideContext, BLOOM_DIFFICULTY_MAP exported from aiProvider.ts
- GameDifficulty exported from types.ts
- AIProviderInterface includes generateGameQuestions signature
- No breaking changes to existing code
</success_criteria>

<output>
After completion, create `.planning/phases/22-ai-integration/22-01-SUMMARY.md`
</output>
