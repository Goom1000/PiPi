# Milestone v1.1: Draggable Preview Window

**Status:** SHIPPED 2026-01-18
**Phases:** 1-2
**Total Plans:** 3

## Overview

Transform the fixed-position next slide preview into a fully interactive floating window. Phase 1 delivers drag, resize, and float-above-all behavior. Phase 2 adds snap-to-grid positioning and session persistence so teachers don't have to reposition the preview every time.

## Phases

### Phase 1: Drag, Resize & Float

**Goal**: Teacher can move and resize the preview window freely
**Depends on**: Nothing (first phase of v1.1)
**Plans**: 1 plan

Plans:
- [x] 01-01-PLAN.md — Implement drag, resize, float with react-rnd

**Details:**
- Requirements: PREV-01, PREV-02, PREV-03, PREV-04, PREV-05
- Success Criteria:
  1. Teacher can click and drag preview window center to any position on screen
  2. Preview window stays above all other UI elements (slides, controls, teleprompter)
  3. Teacher can drag preview corners to resize the window
  4. Preview cannot be resized below minimum readable size (content remains visible)

### Phase 2: Snap-to-Grid & Persistence

**Goal**: Preview remembers position and can snap to neat grid positions
**Depends on**: Phase 1
**Plans**: 2 plans

Plans:
- [x] 02-01-PLAN.md — Persistence infrastructure (hook + controlled FloatingWindow)
- [x] 02-02-PLAN.md — Snap toggle UI and grid overlay

**Details:**
- Requirements: PREV-06, PREV-07, PREV-08, PREV-09, PREV-10, PREV-11
- Success Criteria:
  1. Toggle button on preview window enables/disables snap-to-grid mode
  2. When snap enabled, dragging preview snaps to invisible grid positions
  3. Button visual clearly indicates current snap state (on vs off)
  4. After page refresh, preview appears in same position and size as before
  5. Snap toggle state persists across sessions (remembers on/off preference)

---

## Milestone Summary

**Key Decisions:**
- react-rnd for combined drag+resize with aspect ratio lock
- 20px edge magnetism threshold for snapping to viewport edges
- Portal rendering for z-index isolation (z-index 9999)
- Corner-only resize handles that appear on hover
- 80% opacity during drag with 150ms transition
- Storage key uses first slide ID for per-presentation uniqueness
- Save on visibilitychange + beforeunload + unmount for reliability
- 50px grid size for snap-to-grid positioning
- Invisible grid snapping (removed visual overlay per user feedback)

**Issues Resolved:**
- Grid overlay misalignment with snap positions — solved by removing overlay

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None

---

_For current project status, see .planning/ROADMAP.md_

---
*Archived: 2026-01-18 as part of v1.1 milestone completion*
