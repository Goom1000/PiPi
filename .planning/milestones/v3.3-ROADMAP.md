# Milestone v3.3: Deck-wide Verbosity

**Status:** ✅ SHIPPED 2026-01-26
**Phases:** 33-35
**Total Plans:** 3

## Overview

v3.3 extends the per-slide verbosity toggle from v3.1 to work deck-wide. Users select verbosity upfront during upload, can change it globally during presentation mode (with confirmation and full regeneration), and the setting persists in save files with backward compatibility.

## Phases

### Phase 33: Upfront Verbosity Selection

**Goal**: Users can choose their preferred verbosity level before generating slides
**Depends on**: Nothing (first phase of milestone)
**Plans**: 1 plan

Plans:
- [x] 33-01: Extend AI pipeline with verbosity + add landing page selector UI

**Details:**
- Added verbosity selector (Concise/Standard/Detailed) to landing page near upload zones
- Extended GenerationInput interface with optional verbosity field
- Both Gemini and Claude providers use getTeleprompterRulesForVerbosity helper
- Default is Standard when no selection made

### Phase 34: Deck-wide Verbosity Toggle

**Goal**: Users can change verbosity for entire presentation with controlled regeneration
**Depends on**: Phase 33 (verbosity selection UI patterns)
**Plans**: 1 plan

Plans:
- [x] 34-01: Replace per-slide verbosity with deck-wide toggle + batch regeneration

**Details:**
- Replaced per-slide verbosity selector with deck-wide "Deck Style" toggle
- Confirmation dialog shows slide count before regeneration
- Batch regeneration with sequential AI calls and context awareness
- Progress overlay with spinner, "slide X of Y" counter, and progress bar
- Cancellation with AbortController and full rollback to snapshot
- Retry logic (2 attempts per slide) for resilience

### Phase 35: Persistence

**Goal**: Deck verbosity level survives save/load cycles
**Depends on**: Phase 34 (deck-wide verbosity must exist to persist)
**Plans**: 1 plan

Plans:
- [x] 35-01: Extend file format to v3 with deckVerbosity + wire save/load

**Details:**
- File format bumped to v3 with deckVerbosity field
- 'standard' verbosity omitted from saved files (cleaner format)
- v2 files load with 'standard' default (backward compatibility)
- deckVerbosity state lifted to App.tsx for persistence integration

---

## Milestone Summary

**Key Decisions:**

- Optional verbosity in GenerationInput — backward compatibility with existing callers
- Deck-wide replaces per-slide verbosity — simpler UX, consistent deck experience
- AbortController for batch cancel — React-native pattern for cancellable async operations
- Snapshot rollback on cancel — deep copy before batch allows full state restoration
- File format v3 with deckVerbosity — persist deck-wide setting, omit 'standard' for clean files
- Lifted deckVerbosity to App.tsx — state at persistence boundary, controlled prop to PresentationView

**Issues Resolved:**

- Per-slide verbosity UX confusion resolved by moving to deck-wide approach
- Batch regeneration safely handles cancellation with complete state rollback

**Issues Deferred:**

None

**Technical Debt Incurred:**

None

---

_For current project status, see .planning/ROADMAP.md (created for next milestone)_

---
*Archived: 2026-01-26 as part of v3.3 milestone completion*
